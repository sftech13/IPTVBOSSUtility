#!/bin/bash
set -e

echo "ðŸ”§ Verifying dependencies..."

missing=()

for pkg in python3 python3-tk ffmpeg; do
    if ! dpkg -s "$pkg" >/dev/null 2>&1; then
        missing+=("$pkg")
    fi
done

if [ "${#missing[@]}" -gt 0 ]; then
    echo "ðŸ“¦ Installing missing packages: ${missing[*]}"
    apt-get install -y "${missing[@]}"
else
    echo "âœ… All required packages are already installed."
fi

echo "ðŸŽ‰ IPTV Stream Checker installed successfully."
exit 0
